<?xml version='1.0' ?>
<BuildGraph xmlns="http://www.epicgames.com/BuildGraph" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.epicgames.com/BuildGraph ../../../../../../../Engine/Build/Graph/Schema.xsd" >
	<!-- =============================================================================== -->
	<!-- Include this graph in your project's Tests.xml graph AFTER BuildAndTestProject.xml in order to 
	     process the Insights traces that were generated by all the previous tests       
	     You also need to make sure that somewhere before this is included you've also included
	     AutomatedPerfTestCommonSettings.xml                                             -->
	<!-- =============================================================================== -->
	
	<!-- If an Insights trace was requested, run the report job on a TestWin64 and have it process all of the unprocessed traces -->
	<Do If="$(DoInsightsTrace)">
		<!-- since this command is wholly constructed here, we need to send in things like Project and Build names --> 
		<Property Name="InsightsReportCommonArguments" Value="$(AutomatedPerformanceCommonArgs)" />
		<Property Name="InsightsReportCommonArguments" Value="$(InsightsReportCommonArguments) AutomatedPerfTest.BuildName=$(BuildNamePath)" />
		<Property Name="InsightsReportCommonArguments" Value="$(InsightsReportCommonArguments) AutomatedPerfTest.ProjectName=$(ProjectName)" />
		
		<Property Name="InsightsReportNodeNameBase" Value="$(ProjectName) Insights Report" />
		<Agent Name="$(InsightsReportNodeNameBase)" Type="TestWin64">
			<Node Name="$(ProjectName) Insights Report" Requires="BuildAndTest $(ProjectName)">
				<Command Name="$(ProjectName)TestInsightsReport" Arguments="$(AutomatedPerformanceCommonArgs)" />
			</Node>
		</Agent>
		<Property Name="BuildAndTestExtendedRequirements" Value="$(BuildAndTestExtendedRequirements);$(InsightsReportNodeNameBase)" />
	</Do>

</BuildGraph>
